# ะะตัะฐะปัะฝัะน ะฟะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ ะฐะดะผะธะฝะบะธ ะดะปั ะฑะพัะฐ ัะพะทัะณัััะตะน

## 1. ะกัััะบัััะฐ ะฐะดะผะธะฝัะบะพะณะพ ะผะตะฝั

### ะะปะฐะฒะฝะพะต ะฐะดะผะธะฝ-ะผะตะฝั
```
๐ ะะดะผะธะฝะบะฐ
โโโ ๐ ะกัะฐัะธััะธะบะฐ
โโโ ๐ฅ ะะพะปัะทะพะฒะฐัะตะปะธ  
โโโ ๐ ะะพะทัะณัััะธ
โโโ ๐ข ะะฐัััะปะบะฐ
```

## 2. ะกัะฐัะธััะธะบะฐ

### ะัะฝะพะฒะฝะพะต ะผะตะฝั ััะฐัะธััะธะบะธ
```
๐ ะกัะฐัะธััะธะบะฐ
โโโ ๐ ะะฑัะฐั ััะฐัะธััะธะบะฐ
โ   โโโ ๐ฅ ะัะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปะตะน: X
โ   โโโ ๐ ะะบัะธะฒะฝัั ัะพะทัะณัััะตะน: X
โ   โโโ ๐ซ ะัะตะณะพ ััะฐััะธะน: X
โ   โโโ ๐ ะกะตััะธะน ัะตะณะพะดะฝั: X
โ   โโโ โ๏ธ ะะฐะทะฐะด
โโโ ๐ ะะพัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โ   โโโ ๐ฅ ะะพะฒัะต ะทะฐ ัะตะณะพะดะฝั: X
โ   โโโ ๐ ะะพะฒัะต ะทะฐ ะฝะตะดะตะปั: X
โ   โโโ ๐ ะะพะฒัะต ะทะฐ ะผะตััั: X
โ   โโโ โ๏ธ ะะฐะทะฐะด
โโโ โญ ะัะตะผะธัะผ ััะฐัะธััะธะบะฐ
โ   โโโ ๐ ะัะตะผะธัะผ ะฟะพะปัะทะพะฒะฐัะตะปะตะน: X
โ   โโโ ๐ฐ ะะพะฝะฒะตััะธั: X%
โ   โโโ ๐ ะะพัั ะฟัะตะผะธัะผะฐ: X
โ   โโโ โ๏ธ ะะฐะทะฐะด
โโโ ๐ฎ ะะพะทัะณัััะธ
โ   โโโ ๐ข ะะบัะธะฒะฝัะต: X
โ   โโโ ๐ด ะะฐะฒะตััะตะฝะฝัะต: X
โ   โโโ ๐ฏ ะกัะตะดะฝะตะต ััะฐััะฝะธะบะพะฒ: X
โ   โโโ โ๏ธ ะะฐะทะฐะด
โโโ ๐ฏ ะฃัะฐััะธั
โ   โโโ ๐ซ ะะฑัะตะต ะบะพะปะธัะตััะฒะพ: X
โ   โโโ ๐ ะกัะตะดะฝะตะต ะฝะฐ ัะพะทัะณััั: X
โ   โโโ โ๏ธ ะะฐะทะฐะด
โโโ โ๏ธ ะะฐะทะฐะด
```

### SQL-ะทะฐะฟัะพัั ะดะปั ะฟะพะปััะตะฝะธั ััะฐัะธััะธะบะธ:

#### ะะฑัะฐั ััะฐัะธััะธะบะฐ
```sql
-- ะัะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
SELECT COUNT(*) FROM users;

-- ะะบัะธะฒะฝัั ัะพะทัะณัััะตะน
SELECT COUNT(*) FROM giveaways WHERE status = 'active';

-- ะัะตะณะพ ััะฐััะธะน
SELECT COUNT(*) FROM participants;

-- ะะพะปัะทะพะฒะฐัะตะปะตะน ะฑะตะท ะฐะฒะฐัะฐัะบะธ (ะฟะพัะตะฝัะธะฐะปัะฝัะต ะฑะพัั)
SELECT COUNT(*) FROM users WHERE username IS NULL;
```

#### ะะพัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
```sql
-- ะะพะฒัะต ะทะฐ ัะตะณะพะดะฝั
SELECT COUNT(*) FROM users WHERE DATE(created_at) = CURRENT_DATE;

-- ะะพะฒัะต ะทะฐ ะฝะตะดะตะปั
SELECT COUNT(*) FROM users WHERE created_at >= CURRENT_DATE - INTERVAL '7 days';

-- ะะพะฒัะต ะทะฐ ะผะตััั
SELECT COUNT(*) FROM users WHERE created_at >= CURRENT_DATE - INTERVAL '30 days';
```

#### ะัะตะผะธัะผ ััะฐัะธััะธะบะฐ
```sql
-- ะัะตะผะธัะผ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
SELECT COUNT(*) FROM users WHERE is_premium = true AND premium_until > NOW();

-- ะะพะฝะฒะตััะธั (ะตัะปะธ ะฑัะดะตะผ ะพััะปะตะถะธะฒะฐัั ะฟะพะบัะฟะบะธ)
-- ะัะตะดะฟะพะปะพะถะธะผ ะตััั ัะฐะฑะปะธัะฐ purchases
SELECT
    COUNT(DISTINCT user_id) * 100.0 / (SELECT COUNT(*) FROM users) AS conversion_rate
FROM purchases;
```

#### ะะพะทัะณัััะธ
```sql
-- ะะบัะธะฒะฝัะต/ะทะฐะฒะตััะตะฝะฝัะต
SELECT status, COUNT(*) FROM giveaways GROUP BY status;

-- ะกัะตะดะฝะตะต ััะฐััะฝะธะบะพะฒ
SELECT AVG(participant_count) FROM (
    SELECT giveaway_id, COUNT(user_id) as participant_count
    FROM participants
    GROUP BY giveaway_id
) t;
```

## 3. ะะพะปัะทะพะฒะฐัะตะปะธ

### ะะตะฝั ัะฟะธัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปะตะน
```
๐ฅ ะะพะปัะทะพะฒะฐัะตะปะธ
โโโ ๐ ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปั
โโโ ๐ ะกะฟะธัะพะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ะฟะฐะณะธะฝะฐัะธั)
โ   โโโ ๐ค [ID] @username (ะธะผั) - ะฟัะตะผะธัะผ/ะพะฑััะฝัะน
โ   โโโ ๐ค [ID] @username (ะธะผั) - ะฟัะตะผะธัะผ/ะพะฑััะฝัะน
โ   โโโ ... (ะฟะพ 10 ะฝะฐ ัััะฐะฝะธัะต)
โโโ โช ะะฐะทะฐะด

```

### ะะตะฝั ะฟัะพัะผะพััะฐ ะฟะพะปัะทะพะฒะฐัะตะปั
```
๐ค ะะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต [ID]
โโโ ๐ ID: [user_id]
โโโ ๐ ะะผั: [full_name]
โโโ ๐ค Username: @username
โโโ โฐ ะะฐัะตะณะธัััะธัะพะฒะฐะฝ: [date]
โโโ ๐ ะัะตะผะธัะผ: [ััะฐััั ะธ ะดะฐัะฐ ะพะบะพะฝัะฐะฝะธั]
โโโ ๐ซ ะะพะทัะณัััะธ: [ะบะพะป-ะฒะพ]
โโโ ๐ฏ ะฃัะฐััะธั: [ะบะพะป-ะฒะพ]
โโโ ๐ ะกะพะทะดะฐะฝะฝัะต ัะพะทัะณัััะธ: [ะบะพะป-ะฒะพ]
โโโ โญ ะัะดะฐัั ะฟัะตะผะธัะผ
โโโ โ ะะฐะฑัะฐัั ะฟัะตะผะธัะผ
โโโ ๐ ะะพะทัะณัััะธ ะฟะพะปัะทะพะฒะฐัะตะปั
โโโ โ๏ธ ะะฐะทะฐะด
```

### ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปั
```
๐ ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปั
ะะฒะตะดะธัะต ID ะธะปะธ @username:
```

## 4. ะะพะทัะณัััะธ

### ะะตะฝั ัะฟะธัะบะฐ ัะพะทัะณัััะตะน
```
๐ ะะพะทัะณัััะธ
โโโ ๐ ะะพะธัะบ ัะพะทัะณัััะฐ
โโโ ๐ ะกะฟะธัะพะบ ัะพะทัะณัััะตะน (ะฟะฐะณะธะฝะฐัะธั)
โ   โโโ ๐ [ID] "[ะฟัะธะท]" - ะฒะปะฐะดะตะปะตั [ID] - [ััะฐััะฝะธะบะธ] ัะตะป.
โ   โโโ ๐ [ID] "[ะฟัะธะท]" - ะฒะปะฐะดะตะปะตั [ID] - [ััะฐััะฝะธะบะธ] ัะตะป.
โ   โโโ ... (ะฟะพ 10 ะฝะฐ ัััะฐะฝะธัะต, ัะพััะธัะพะฒะบะฐ ะฟะพ ะดะฐัะต ัะพะทะดะฐะฝะธั)
โโโ โช ะะฐะทะฐะด
โโโ โญ ะะฟะตัะตะด
```

### ะะพะธัะบ ัะพะทัะณัััะฐ
```
๐ ะะพะธัะบ ัะพะทัะณัััะฐ
ะะฒะตะดะธัะต ัะปะพะฒะพ ะธะท ะฟัะธะทะฐ ะธะปะธ ID/username ะฒะปะฐะดะตะปััะฐ:
```

### ะะตะฝั ะฟัะพัะผะพััะฐ ัะพะทัะณัััะฐ
```
๐ ะะพะทัะณััั #[ID]
โโโ ๐ ะัะธะท: [text]
โโโ ๐ ะะปะฐะดะตะปะตั: [user_id]
โโโ ๐ ะกะพะทะดะฐะฝ: [date]
โโโ ๐ ะะฐะฒะตััะธััั: [date]
โโโ ๐ฏ ะฃัะฐััะฝะธะบะพะฒ: [count]
โโโ ๐ ะะพะฑะตะดะธัะตะปะตะน: [count]
โโโ ๐ข ะกัะฐััั: [active/finished]
โโโ ๐ ะัะตะดะฟัะพัะผะพัั ะฟะพััะฐ
โโโ ๐ฒ ะัะธะฝัะดะธัะตะปัะฝะพ ะทะฐะฒะตััะธัั
โโโ ๐ ะัะธะฝัะดะธัะตะปัะฝัะน ะฟะพะฑะตะดะธัะตะปั
โโโ ๐ฅ ะกะฟะธัะพะบ ััะฐััะฝะธะบะพะฒ
โโโ โ๏ธ ะะฐะทะฐะด
```

### ะะพะดัะฒะตัะถะดะตะฝะธะต ะดะพััะพัะฝะพะณะพ ะทะฐะฒะตััะตะฝะธั
```
โ๏ธ ะั ัะฒะตัะตะฝั, ััะพ ัะพัะธัะต ะทะฐะฒะตััะธัั ัะพะทัะณััั?
ะัะต ััะฐััะฝะธะบะธ ะฑัะดัั ัะฒะตะดะพะผะปะตะฝั.
โโโ โ ะะฐ
โโโ โ ะะตั
```

### ะัะธะฝัะดะธัะตะปัะฝัะน ะฒัะฑะพั ะฟะพะฑะตะดะธัะตะปั
```
๐ ะะฒะตะดะธัะต ID ะฟะพะปัะทะพะฒะฐัะตะปั, ะบะพัะพััะน ััะฐะฝะตั ะฟะพะฑะตะดะธัะตะปะตะผ:
```

## 5. ะะฐัััะปะบะฐ

### ะัะฝะพะฒะฝะพะต ะผะตะฝั ัะฐัััะปะบะธ
```
๐ข ะะฐัััะปะบะฐ
โโโ โ๏ธ ะกะพะทะดะฐัั ัะฐัััะปะบั
โโโ ๐ ะััะพัะธั ัะฐัััะปะพะบ
โโโ โฑ ะัะปะพะถะตะฝะฝัะต ัะฐัััะปะบะธ
โโโ ๐ ะกัะฐัะธััะธะบะฐ ัะฐัััะปะพะบ
โโโ โ๏ธ ะะฐะทะฐะด
```

### ะกะพะทะดะฐะฝะธะต ัะฐัััะปะบะธ
```
โ๏ธ ะกะพะทะดะฐะฝะธะต ัะฐัััะปะบะธ
ะะฒะตะดะธัะต ัะตะบัั ัะพะพะฑัะตะฝะธั ะธะปะธ ะฟัะธะบัะตะฟะธัะต ะผะตะดะธะฐ:
```

### ะัะตะดะฟัะพัะผะพัั ัะฐัััะปะบะธ
```
๐ ะัะตะดะฟัะพัะผะพัั:
[ะฟัะตะดะฒะฐัะธัะตะปัะฝัะน ะฟัะพัะผะพัั ัะพะพะฑัะตะฝะธั]

๐ง ะะฐัััะพะนะบะธ:
โโโ ๐ค ะัะฟัะฐะฒะธัั ัะตะนัะฐั
โโโ โฐ ะัะปะพะถะตะฝะฝะฐั ะพัะฟัะฐะฒะบะฐ
โโโ โ๏ธ ะะฐะทะฐะด
```

### ะัะฑะพั ะฒัะตะผะตะฝะธ ะพัะปะพะถะตะฝะฝะพะน ะพัะฟัะฐะฒะบะธ
```
โฐ ะัะฑะตัะธัะต ะฒัะตะผั ะพัะฟัะฐะฒะบะธ:
[ะบะฐะปะตะฝะดะฐัั/ะฒัะตะผั ะบะฐะบ ะฒ ัะพะทะดะฐะฝะธะธ ัะพะทัะณัััะตะน]
```

### ะััะพัะธั ัะฐัััะปะพะบ
```
๐ ะััะพัะธั ัะฐัััะปะพะบ
โโโ ๐จ [ะะฐัะฐ] "[ะะตัะฒัะต ัะปะพะฒะฐ...]" - [ััะฐััั] - [ะพัะฟัะฐะฒะปะตะฝะพ/ะฒัะตะณะพ]
โโโ ๐จ [ะะฐัะฐ] "[ะะตัะฒัะต ัะปะพะฒะฐ...]" - [ััะฐััั] - [ะพัะฟัะฐะฒะปะตะฝะพ/ะฒัะตะณะพ]
โโโ ... (ะฟะฐะณะธะฝะฐัะธั)
```

### ะัะปะพะถะตะฝะฝัะต ัะฐัััะปะบะธ
```
โฑ ะัะปะพะถะตะฝะฝัะต ัะฐัััะปะบะธ
โโโ โฐ [ะัะตะผั] "[ะะตัะฒัะต ัะปะพะฒะฐ...]" - [ััะฐััั]
โโโ โฐ [ะัะตะผั] "[ะะตัะฒัะต ัะปะพะฒะฐ...]" - [ััะฐััั]
โโโ ... (ะฟะฐะณะธะฝะฐัะธั)
```

### ะะตะฝั ะพัะปะพะถะตะฝะฝะพะน ัะฐัััะปะบะธ
```
โฑ ะัะปะพะถะตะฝะฝะฐั ัะฐัััะปะบะฐ
๐ ะัะตะดะฟัะพัะผะพัั:
[ะฟัะตะดะฒะฐัะธัะตะปัะฝัะน ะฟัะพัะผะพัั ัะพะพะฑัะตะฝะธั]

๐ง ะฃะฟัะฐะฒะปะตะฝะธะต:
โโโ ๐ ะัะฟัะฐะฒะธัั ัะตะนัะฐั
โโโ โ ะฃะดะฐะปะธัั
โโโ โ๏ธ ะะฐะทะฐะด
```

### ะกัะฐัะธััะธะบะฐ ัะฐัััะปะพะบ
```
๐ ะกัะฐัะธััะธะบะฐ ัะฐัััะปะพะบ
โโโ ๐จ ะัะตะณะพ ะพัะฟัะฐะฒะปะตะฝะพ: X
โโโ ๐ ะัะบัััะธะน: X
โโโ ๐ ะะพะฝะฒะตััะธั: X%
โโโ โ๏ธ ะะฐะทะฐะด
```

## 6. ะะตะฐะปะธะทะฐัะธั ั ััะตัะพะผ ะพะณัะฐะฝะธัะตะฝะธะน Telegram

### ะะณัะฐะฝะธัะตะฝะธั ะธ ัะตัะตะฝะธั:
1. **30 ัะพะพะฑัะตะฝะธะน ะฒ ัะตะบัะฝะดั ะณะปะพะฑะฐะปัะฝะพ** - ะพัะฟัะฐะฒะบะฐ ัะฐัััะปะพะบ ะฟะพััะธะพะฝะฝะพ ะฟะพ 5 ัะพะพะฑัะตะฝะธะน ั ะทะฐะดะตัะถะบะพะน
2. **1 ัะพะพะฑัะตะฝะธะต ะฒ ัะตะบัะฝะดั ะฒ ะฟัะธะฒะฐัะฝัะน ัะฐั** - ะพัะตัะตะดั ั ัะฐะนะผะตัะพะผ
3. **20 ัะพะพะฑัะตะฝะธะน ะฒ ะผะธะฝััั ะฒ ัะฐั** - ะบะพะฝััะพะปั ัะฐััะพัั ะพัะฟัะฐะฒะบะธ

### ะััะธัะตะบัััะฐ ัะฐัััะปะบะธ:
```python
# ะขะฐะฑะปะธัะฐ ะดะปั ะพัะปะพะถะตะฝะฝัั ัะฐัััะปะพะบ
class ScheduledBroadcast(Base):
    __tablename__ = "scheduled_broadcasts"
    
    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    message_text: Mapped[str] = mapped_column(Text)
    media_file_id: Mapped[str | None] = mapped_column(String)
    media_type: Mapped[str | None] = mapped_column(String)
    scheduled_time: Mapped[datetime] = mapped_column(DateTime)
    status: Mapped[str] = mapped_column(String, default="pending")  # pending, sent, cancelled
    created_at: Mapped[datetime] = mapped_column(DateTime, default=func.now())

# ะขะฐะฑะปะธัะฐ ะดะปั ะธััะพัะธะธ ัะฐัััะปะพะบ
class BroadcastHistory(Base):
    __tablename__ = "broadcast_history"
    
    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    message_text: Mapped[str] = mapped_column(Text)
    sent_count: Mapped[int] = mapped_column(Integer, default=0)
    total_count: Mapped[int] = mapped_column(Integer)
    sent_at: Mapped[datetime] = mapped_column(DateTime, default=func.now())
```

### ะกะธััะตะผะฐ ะพัะตัะตะดะธ ัะฐัััะปะพะบ:
```python
import asyncio
from asyncio import Queue

class BroadcastQueue:
    def __init__(self):
        self.queue = Queue()
        self.is_running = False
    
    async def add_to_queue(self, user_ids: list[int], message_data: dict):
        for user_id in user_ids:
            await self.queue.put({"user_id": user_id, "message_data": message_data})
    
    async def send_broadcast_batch(self, bot: Bot, batch_size=5):
        while self.is_running:
            batch = []
            for _ in range(batch_size):
                if not self.queue.empty():
                    batch.append(await self.queue.get())
            
            if batch:
                tasks = []
                for item in batch:
                    task = self.safe_send_message(bot, item["user_id"], item["message_data"])
                    tasks.append(task)
                
                await asyncio.gather(*tasks, return_exceptions=True)
                await asyncio.sleep(1)  # ะฃะฒะฐะถะตะฝะธะต ะบ ัะตะนั-ะปะธะผะธัะฐะผ
            
            await asyncio.sleep(0.1)  # ะะตะฑะพะปััะฐั ะฟะฐัะทะฐ ะผะตะถะดั ะฑะฐััะฐะผะธ
```

## 7. ะะตะทะพะฟะฐัะฝะพััั

### ะะฐัะธัะฐ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ:
1. ะัะพะฒะตัะบะฐ ะฟะพ `ADMIN_IDS` ะธะท ะบะพะฝัะธะณะฐ
2. HMAC-ะฟะพะดะฟะธัั ะดะปั ะบัะธัะธัะตัะบะธั ะพะฟะตัะฐัะธะน
3. ะะพะณะธัะพะฒะฐะฝะธะต ะฒัะตั ะดะตะนััะฒะธะน ะฐะดะผะธะฝะธัััะฐัะพัะพะฒ
4. ะะฐัะธัะฐ ะพั ัะปััะฐะนะฝัั ะดะตะนััะฒะธะน (ะฟะพะดัะฒะตัะถะดะตะฝะธะต ัะดะฐะปะตะฝะธั/ะทะฐะฒะตััะตะฝะธั)

### ะกะธััะตะผะฐ ะปะพะณะธัะพะฒะฐะฝะธั:
```python
# ะขะฐะฑะปะธัะฐ ะดะปั ะปะพะณะพะฒ ะฐะดะผะธะฝ-ะดะตะนััะฒะธะน
class AdminLog(Base):
    __tablename__ = "admin_logs"
    
    id: Mapped[int] = mapped_column(Integer, primary_key=True)
    admin_id: Mapped[int] = mapped_column(BigInteger)
    action: Mapped[str] = mapped_column(String)
    target_id: Mapped[int | None] = mapped_column(BigInteger)
    details: Mapped[dict | None] = mapped_column(JSON)
    timestamp: Mapped[datetime] = mapped_column(DateTime, default=func.now())
```

ะขะตะฟะตัั ะฒะฐั ะฟะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ ะฐะดะผะธะฝะบะธ ะฟะพะปะฝะพัััั ััััะบัััะธัะพะฒะฐะฝ ะธ ะณะพัะพะฒ ะบ ะฒะฝะตะดัะตะฝะธั ั ััะตัะพะผ ะฒัะตั ัะตัะฝะธัะตัะบะธั ะพะณัะฐะฝะธัะตะฝะธะน ะธ ััะตะฑะพะฒะฐะฝะธะน ะฑะตะทะพะฟะฐัะฝะพััะธ.